# ChSON — Cheatsheet JSON Format

ChSON is a small JSON-based format for writing software cheatsheets in a consistent,
tool-friendly way.

The goal is simple: make it easy for developers to publish cheatsheets once and then
consume them in many ways — searchable websites, printable pages, study decks, or
personal knowledge bases.

## What's in a ChSON cheatsheet?

A ChSON file is a single JSON document with:

- Top-level metadata (`title`, optional `version`, `publicationDate`, `description`)
- Optional `retrievalDirection` ("mechanism-to-meaning" or "intent-to-mechanism")
- Optional `anchorLabel` and `contentLabel` for custom column headers
- Optional `metadata` for custom fields
- A `sections[]` array, each containing `entries[]` (the individual cheats)
- Each entry has an `anchor` (what users scan for), `content` (what they need),
  and optional `label` (human-readable description when the anchor is cryptic)

Files use the extension `.chson.json`.

## Schema

ChSON files validate against the canonical JSON Schema (currently v2):

- `https://chson.dev/schema/v2/chson.schema.json`

In each cheatsheet, set:

  ```json
  {
    "$schema": "https://chson.dev/schema/v2/chson.schema.json"
  }
  ```

Visit the [documentation](https://chson.carlesandres.com/docs) for detailed explanations
of anchors, content, labels, and retrieval direction.

## Quickstart

Install dependencies:

```bash
npm install
```

Validate all cheatsheets:

```bash
npm run validate
```

Validate a single file:

```bash
node packages/chson-cli/src/chson.js validate packages/chson-registry/cheatsheets/git/core.chson.json
```

Render a single cheatsheet to Markdown (2-column table) to stdout:

```bash
node packages/chson-cli/src/chson.js render markdown packages/chson-registry/cheatsheets/git/core.chson.json
```

Render all cheatsheets into a directory of Markdown pages:

```bash
npm run render:build
```

## Registry

Example cheatsheets live in the `@chson/registry` package and are showcased in the Next.js website.

- Package: `packages/chson-registry/`
- Example source file: `packages/chson-registry/cheatsheets/git/core.chson.json`
- Website page: `apps/site/src/app/cheatsheets/[product]/[name]/page.tsx`

Generated output:

- `build/registry-md/` (gitignored, generated by `npm run render:build`)

## Website

The website lives in `apps/site/` (Next.js).

```bash
npm install
npm run dev
```

### Deploy (Vercel)

- Production URL: `https://chson.carlesandres.com`
- Vercel: set **Root Directory** to the repo root (`.`)
- Build: `npm run build -- --filter=@chson/site` (see `vercel.json`)
- Output: `apps/site/dist` (see `vercel.json`)
- DNS: create a `CNAME` record for `chson` pointing to `cname.vercel-dns.com`

## Repository layout

This is a Turborepo monorepo with the following packages:

- `packages/chson-schema/` — ChSON JSON Schema + auto-generated TypeScript types
- `packages/chson-registry/` — Source cheatsheets (registry)
- `packages/chson-cli/` — CLI (`chson`) for validate + render
- `apps/site/` — Next.js website

### Package Dependencies

```
@chson/schema (builds types)
  ├── @chson/cli (validates/renders)
  └── @chson/registry (validates its cheatsheets)
        └── @chson/site (displays cheatsheets)
```

Turborepo automatically builds packages in the correct order.

## Tooling

This repo currently ships a minimal Node CLI:

- Validate ChSON files using AJV (auto-detects v2 schema)
- Render ChSON to Markdown using 2-column tables (Anchor / Content, with custom labels)

The v2 format is based on cognitive retrieval theory. The `anchor` field represents
what users scan for (command, shortcut, keyword), and `content` represents what they need
(description, action, result). Optional `label` fields provide human-readable descriptions
when anchors are cryptic. See `research/cognitive-foundations.md` for details.

If you want to build a renderer (PDF, flashcards, etc.), the current schema is intentionally
minimal — the `comments` field can hold any extra structure you need while the standard
stays small.

## Contributing

Contributions are welcome, especially:

- new example cheatsheets under `packages/chson-registry/cheatsheets/`
- improvements to the schema that keep it simple
- renderers and tooling (validation, conversion, indexing)

Before submitting changes:

```bash
npm run validate
npm run build
```

## Status

ChSON is early and evolving. The current focus is:

- a stable minimal schema
- a growing registry of example cheatsheets
- basic tooling (validate + render) to support downstream integrations
